{% extends 'base.html.twig' %}

{% block title %}CompetenzeBis index{% endblock %}

{% block body %}
    <h1>Lista delle conoscenze</h1>

    <form class="form-inline mb-3" method="GET" action="{{ path('app_competenze_bis_index') }}">
      <div class="form-row align-items-center">
          <div class="col-auto">
              <label for="category" class="mr-2">Filtra per categoria:</label>
          </div>
          <div class="col-auto">
              <select name="category" id="category" class="form-control">
                  <option value="">Tutte le categorie</option>
                  {% for category in categories %}
                      <option value="{{ category.id }}" {{ app.request.query.get('category') == category.id ? 'selected' : '' }}>{{ category.nome }}</option>
                  {% endfor %}
              </select>
          </div>
          <div class="col-auto">
              <button type="submit" class="btn btn-primary">Filtro</button>
          </div>
      </div>
  </form>

  <form class="form-inline mb-3" method="GET" action="{{ path('app_competenze_bis_index') }}">
    <div class="form-group">
        <input type="text" name="search" id="search" class="form-control" placeholder="Cerca competenze">
    </div>
    <button type="submit" class="btn btn-primary ml-2">Cerca</button>
</form>


    <div class="row">
        {% for competenze_bi in competenze_bis %}
            <div class="col-md-4 mb-4">
                <div class="card card-bg card-big rounded shadow">
                <div class="flag-icon invisible"></div>



                <div class="etichetta">
                {% for competenza in competenze_bi.categorieRelation %}
                    <span>{{ competenza.nome }}</span>
                {% endfor %}
                </div>
                    <div class="card-body">
                        <h5 class="card-title">{{ competenze_bi.Titolo }}</h5>
                        <p class="card-text">{{ competenze_bi.Descrizione }}</p>

                        <div class="card-text">
                            <strong>Categoria:</strong>
                            {% for competenza in competenze_bi.categorieRelation %}
                                {{ competenza.nome }}
                            {% endfor %}
                        </div>

                      {#  <div class="card-text">
                            <strong>Utenti con competenza:</strong>
                            {% for user in competenze_bi.userRelation %}
                                <a href="{{ path('app_user_profile', {'id': user.id}) }}">{{ user.nickname }}</a>
                                <a href="{{ path('app_scambi_new', { 'userTarget' : user } )}}"
                                   class="btn btn-primary"
                                   data-focus-mouse="false">Proponi scambio</a>
                            {% endfor %}
                        </div> #}

                        <div class="card-text">
                            <strong>Status:</strong> {{ competenze_bi.StatusActive ? 'Active' : 'Inactive' }}
                        </div>

                        <div class="card-text">
                            <strong>Data di creazione:</strong>
                            {{ competenze_bi.CreateAt ? competenze_bi.CreateAt|date('Y-m-d H:i:s') : '' }}
                        </div>

                        <div class="mt-3">
                            <a href="{{ path('app_competenze_bis_show', {'id': competenze_bi.id}) }}" class="btn btn-secondary">Mostra</a>
                            <a href="{{ path('app_competenze_bis_edit', {'id': competenze_bi.id}) }}" class="btn btn-primary">Modifica</a>
                        </div>


                        <a class="read-more" href="{{ path('app_competenze_bis_show', {'id': competenze_bi.id}) }}">
                          <span class="text">Leggi di pi√π</span>
                          <svg class="icon">
                            <use xlink:href="/bootstrap-italia/dist/svg/sprites.svg#it-arrow-right"></use>
                          </svg>
                        </a>


                    </div>
                </div>
            </div>
        {% else %}
            <p class="col-md-12">Nessun record trovato.</p>
        {% endfor %}
    </div>

    <a href="{{ path('app_competenze_bis_new') }}" class="btn btn-success mt-3">Crea nuovo</a>
{% endblock %}
